{% extends "base.html" %}
{%- block head -%}
    {%- if g.query and g.query!=search_info["canonical_query"] %}
        <link rel="canonical" href="{{url_for('files.category', category=g.category.url, query=search_info['canonical_query'])}}" />
    {%- endif %}
{%- endblock -%}
{% block content %}
<section id="files_page" class="container_24">
{%- if g.query %}
<div class="title big_icon grid_24 {{g.category.url}}">
    <span></span>
    <div>
        <a href='{{url_for("files.home")}}'>All</a>&nbsp;&nbsp;&gt;&nbsp;&nbsp;<a href='{{url_for("files.category", category=g.category.url)}}'>{{g.category.title}}</a>&nbsp;&nbsp;&gt;&nbsp;&nbsp;{{g.query}}
        <h1 class="category">{{g.query}} {{g.category.title|singular}} torrents</h1>
    </div></div>

    {%- if not results %}
    <div class="text_page">
        <p>No <strong>{{g.category.title|singular}}</strong> torrents found for <strong>{{g.query}}</strong>.</p>
        <p>Sorry, we don't have any result that matches your query in this category. Please, try another search or another category.</p>
    </div>
    {%- endif %}
{%- else %}
<div class="title big_icon grid_24 {{g.category.url}}">
    <span></span>
    <div>
        <a href='{{url_for("files.home")}}'>All</a>&nbsp;&nbsp;&gt;&nbsp;&nbsp;{{g.category.title}}
        <h1 class="category">Popular {{g.category.title|singular}} torrents</h1>
    </div>
</div>
{%- endif %}

{%- if results %}
    {%- if featured %}
        <div id="featured_col" class="grid_6">
            {{featured|safe}}
        </div>
        <div class="grid_17 prefix_1 alpha">
        {%- else %}
        <div class="prefix_7 grid_17 alpha">
    {%- endif %}
    {{ results |safe }}
    {%- if search_info["next"] %}
        <a class='more_results' href='{{url_for("files.category", category=g.category.url, query=g.clean_query)}}?s={{search_info["next"]}}{{'&o='+show_order if show_order}}'>more {{g.category.title|lower}} torrents...</a>
    {%- endif %}
    </div>
{%- endif %}
</section>
{% endblock %}
